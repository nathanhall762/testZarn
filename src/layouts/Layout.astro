---
import Header from '../components/Header';
import Footer from '../components/Footer';
import { ViewTransitions, fade } from 'astro:transitions';
import ContactSection from '../components/ContactSection';
import type { DocumentData } from 'firebase/firestore';
import AboutCard from '../components/AboutCard';
import Accordion from '../components/Accordion';
import BulletStatsCard from '../components/BulletStatsCard';
import Hero from '../components/Hero';
import InfoCardList from '../components/InfoCardList';
import Sidekick from '../components/Sidekick';
import TabListCards from '../components/TabListCards';
import TextImagecard from '../components/TextImageCard';

interface Item {
  type: string;
  value: any;
}

interface Props {
  title: string;
  metaDescription: string;
  pageData: DocumentData;
}

const { title, metaDescription, pageData } = Astro.props;

const websiteName = 'Zarn Automotive';
const phone = '(918) 123-1234';
const address = '1234 Main St, Tulsa, OK 74103';
const navs = [
  { link: '/about', name: 'About Us' },
  { link: '/services', name: 'Our Services' },
  { link: '/european-car-repair', name: 'European Car Repair' },
  { link: '/testimonials', name: 'Testimonials' },
  { link: '/book-appointment', name: 'Book Appointment' },
  { link: '/contact', name: 'Contact Us' },
];
const socials = [
  { link: 'https://www.instagram.com/', type: 'instagram' },
  { link: 'https://www.facebook.com/', type: 'facebook' },
];
const cta = 'Contact Us';
---

<!doctype html>
<html
  lang='en'
  class='bg-black font-sans font-light text-white'>
  <head>
    <meta charset='UTF-8' />
    <meta
      name='description'
      content={metaDescription}
    />
    <meta
      name='viewport'
      content='width=device-width'
    />
    <link
      rel='icon'
      type='image/svg+xml'
      href='/favicon.svg'
    />
    <meta
      name='generator'
      content={Astro.generator}
    />
    <script>
      if (
        localStorage.theme === 'dark' ||
        (!('theme' in localStorage) &&
          window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
      localStorage.theme = 'light';
      localStorage.theme = 'dark';
      localStorage.removeItem('theme');
    </script>
    <title>{title ? `${title} - ${websiteName}` : websiteName}</title>
    <ViewTransitions />
  </head>
  <body class='bg-ltbg2 dark:bg-dkbg2'>
    <Header
      title={websiteName}
      navs={navs.filter((nav) => nav.link !== '/')}
      cta={cta}
      client:load
    />
    <main>
      {
        pageData.content.map((item: Item) => {
          switch (item.type) {
            case 'hero_section':
              return <Hero content={item.value} />;
            case 'sidekick_section':
              return <Sidekick content={item.value} />;
            case 'welcome_message_section':
              return <AboutCard content={item.value} />;
            case 'info_card_list':
              return <InfoCardList content={item.value} />;
            case 'bullet_stats_card':
              return <BulletStatsCard content={item.value} />;
            case 'tab_list_cards':
              return <TabListCards content={item.value} />;
            case 'text_image_card':
              return <TextImagecard content={item.value} />;
            case 'accordion':
              return (
                <Accordion
                  content={item.value}
                  client:load
                />
              );
            default:
              return null;
          }
        })
      }
    </main>
    <ContactSection />
    <Footer
      cta={cta}
      address={address}
      copyright=`${websiteName} 2024`
      navs={navs}
      phone={phone}
      socials={socials}
      client:idle
    />
    <style is:global>
      @tailwind base;

      @layer base {
        @keyframes fadeInUp {
          0% {
            opacity: 0;
            transform: translateY(20vh);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .fade-in-up {
          animation: fadeInUp 0.75s ease-out;
        }
        .card-zoom {
          @apply relative overflow-hidden;
        }
        .card-zoom-image {
          @apply absolute h-full w-full transform bg-cover bg-center transition-all duration-500 ease-in-out;
        }
        .card-zoom-text {
          @apply absolute transform text-gray-50 transition-all duration-500 ease-in-out;
        }
        .zoom-in {
          @apply scale-[1.25];
        }
      }

      a {
        @apply transition-transform duration-300 ease-in-out;
      }

      a:hover {
        @apply scale-110;
      }

      strong {
        font-weight: bold;
      }
    </style>
  </body><!-- custom animation keyframes and other global stuffs -->
</html>
